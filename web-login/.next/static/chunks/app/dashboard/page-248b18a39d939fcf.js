(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5302:function(e,t,s){Promise.resolve().then(s.bind(s,5166))},59:function(e,t,s){"use strict";s.d(t,{w_:function(){return l}});var n=s(8078),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(r),o=function(){return(o=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};function l(e){return function(t){return n.createElement(c,o({attr:o({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return n.createElement(t.tag,o({key:s},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var s,r=e.attr,a=e.size,l=e.title,c=i(e,["attr","size","title"]),d=a||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),n.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:s,style:o(o({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&n.createElement("title",null,l),e.children)};return void 0!==a?n.createElement(a.Consumer,null,function(e){return t(e)}):t(r)}},5166:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(7821),r=s(8078),a=s(8504),o=s(9905),i=s(8955);function l(){let e=(0,a.useRouter)(),[t,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{d()},[]);let d=async()=>{try{var t;let{data:{user:n}}=await o.O.auth.getUser();if(!n){e.push("/?mode=signin");return}let r=await fetch("/api/users/me",{headers:{Authorization:"Bearer ".concat(null===(t=(await o.O.auth.getSession()).data.session)||void 0===t?void 0:t.access_token)}});if(!r.ok)throw Error("Failed to fetch user");let a=await r.json();if(c(a),!a.onboarding_complete){e.push("/onboarding");return}s(!1)}catch(t){console.error("Error checking user:",t),e.push("/?mode=signin")}},u=async()=>{await o.O.auth.signOut(),e.push("/?mode=signin")};return t?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:(0,n.jsx)("div",{className:"text-gray-600",children:"Loading..."})}):(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,n.jsxs)("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",null==l?void 0:l.email]})]}),(0,n.jsx)("button",{onClick:u,className:"px-4 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Sign Out"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"border-2 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(null==l?void 0:l.notion_setup_complete)?(0,n.jsx)(i.FJM,{className:"text-green-500"}):(0,n.jsx)(i.G5m,{className:"text-red-500"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"Notion"})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:(null==l?void 0:l.notion_setup_complete)?"Connected":"Not Connected"})]}),(0,n.jsxs)("div",{className:"border-2 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(null==l?void 0:l.amazon_account_id)?(0,n.jsx)(i.FJM,{className:"text-green-500"}):(0,n.jsx)(i.G5m,{className:"text-red-500"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"Amazon"})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:(null==l?void 0:l.amazon_account_id)?"Linked":"Not Linked"})]}),(0,n.jsxs)("div",{className:"border-2 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(null==l?void 0:l.license_key)?(0,n.jsx)(i.FJM,{className:"text-green-500"}):(0,n.jsx)(i.G5m,{className:"text-red-500"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"License"})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:(null==l?void 0:l.license_key)?"Active":"Not Activated"})]})]}),(null==l?void 0:l.onboarding_complete)&&(0,n.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,n.jsx)(i.FJM,{className:"text-green-500 text-xl"}),(0,n.jsx)("h3",{className:"font-semibold text-green-900",children:"All Set!"})]}),(0,n.jsx)("p",{className:"text-sm text-green-700",children:'Your Notion Data Alexa skill is ready to use. Try saying: "Alexa, open Notion Data"'})]})]})})})}},9905:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});var n=s(2616);s(2949);let r="https://ptasyynqqlvrbhqmtvhl.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YXN5eW5xcWx2cmJocW10dmhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NzYwODYsImV4cCI6MjA3OTQ1MjA4Nn0.di3Mk3cndlDzjWwUoXcB8DDslyJO-lbsIHtwRKaWCZI";if(!r||!a)throw console.error("❌ Missing Supabase configuration!"),console.error("Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your environment variables."),Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For local development, create a .env.local file. For production (Vercel), add them in your project settings.");if(r.includes("supabase.com/dashboard")||r.includes("dashboard/project")){let e="❌ Invalid Supabase URL format!\n  \nYour NEXT_PUBLIC_SUPABASE_URL is set to: ".concat(r,'\n\nThis looks like a dashboard URL. It should be the API URL instead.\n\nCorrect format: https://[project-ref].supabase.co\nExample: https://ptasyynqqlvrbhqmtvhl.supabase.co\n\nTo fix:\n1. Go to Supabase Dashboard → Settings → API\n2. Copy the "Project URL" (not the dashboard URL)\n3. Update NEXT_PUBLIC_SUPABASE_URL in Vercel\n4. Redeploy your application');throw console.error(e),alert("Configuration Error: Supabase URL is incorrect. Check console for details."),Error(e)}let o=(0,n.eI)(r,a)}},function(e){e.O(0,[997,479,115,364,744],function(){return e(e.s=5302)}),_N_E=e.O()}]);