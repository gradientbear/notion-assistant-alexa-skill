(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4552:function(e,t,a){Promise.resolve().then(a.bind(a,8590))},8590:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(7821),r=a(8078),i=a(8240),n=a.n(i);function o(){let[e,t]=(0,r.useState)(""),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,p]=(0,r.useState)(!1),h=async t=>{t.preventDefault(),l(!0),u(""),p(!1);try{let t=await fetch("/api/validate-license",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,licenseKey:a})});if(!t.ok){let e=await t.json();throw Error(e.error||"License validation failed")}let s=await fetch("/api/oauth/initiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,licenseKey:a})});if(!s.ok){let e=await s.json();throw Error(e.error||"OAuth initiation failed")}let{authUrl:r}=await s.json();window.location.href=r}catch(e){u(e.message||"An error occurred. Please try again."),l(!1)}};return(0,s.jsx)("div",{className:n().container,children:(0,s.jsxs)("div",{className:n().card,children:[(0,s.jsx)("h1",{className:n().title,children:"Notion Data"}),(0,s.jsx)("p",{className:n().subtitle,children:"Link your Notion account to get started"}),d?(0,s.jsx)("div",{className:n().success,children:(0,s.jsx)("p",{children:"Account linked successfully! You can now use the Alexa skill."})}):(0,s.jsxs)("form",{onSubmit:h,className:n().form,children:[(0,s.jsxs)("div",{className:n().formGroup,children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,s.jsx)("input",{id:"email",type:"email",value:e,onChange:e=>t(e.target.value),required:!0,placeholder:"your@email.com",disabled:o})]}),(0,s.jsxs)("div",{className:n().formGroup,children:[(0,s.jsx)("label",{htmlFor:"licenseKey",children:"License Key"}),(0,s.jsx)("input",{id:"licenseKey",type:"text",value:a,onChange:e=>i(e.target.value),required:!0,placeholder:"Enter your license key",disabled:o})]}),c&&(0,s.jsx)("div",{className:n().error,children:c}),(0,s.jsx)("button",{type:"submit",className:n().button,disabled:o,children:o?"Processing...":"Link Notion Account"})]}),(0,s.jsx)("div",{className:n().footer,children:(0,s.jsx)("p",{children:"Need help? Contact support"})})]})})}},8240:function(e){e.exports={container:"page_container__jZF7q",card:"page_card__Cf__u",title:"page_title__po7na",subtitle:"page_subtitle__YBgxm",form:"page_form__NxPAx",formGroup:"page_formGroup__SWXkg",button:"page_button__52WaL",error:"page_error__JBrsB",success:"page_success__r1r7Y",footer:"page_footer__F3MD0"}}},function(e){e.O(0,[226,115,364,744],function(){return e(e.s=4552)}),_N_E=e.O()}]);