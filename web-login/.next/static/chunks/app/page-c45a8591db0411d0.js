(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4552:function(e,t,r){Promise.resolve().then(r.bind(r,8590))},59:function(e,t,r){"use strict";r.d(t,{w_:function(){return l}});var s=r(8078),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(a),o=function(){return(o=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};function l(e){return function(t){return s.createElement(c,o({attr:o({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return s.createElement(t.tag,o({key:r},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var r,a=e.attr,n=e.size,l=e.title,c=i(e,["attr","size","title"]),d=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:r,style:o(o({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&s.createElement("title",null,l),e.children)};return void 0!==n?s.createElement(n.Consumer,null,function(e){return t(e)}):t(a)}},8590:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r(7821),a=r(8078),n=r(8504),o=r(9905),i=r(8955);function l(){let e=(0,n.useRouter)(),t=(0,n.useSearchParams)(),[r,l]=(0,a.useState)("signin"),[c,d]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[h,b]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[f,x]=(0,a.useState)(""),[y,w]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=t.get("mode");("signup"===e||"signin"===e)&&l(e),v()},[t]);let v=async()=>{let{data:{session:t}}=await o.O.auth.getSession();t&&e.push("/onboarding")},j=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),N=e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(e),S=async t=>{t.preventDefault(),x(""),w(""),p(!0);try{if(!j(c))throw Error("Please enter a valid email address");if("signup"===r){if(!N(u))throw Error("Password must be at least 8 characters with uppercase, lowercase, and number");if(u!==h)throw Error("Passwords do not match");let{data:e,error:t}=await o.O.auth.signUp({email:c,password:u,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t;e.user&&(await C(e.user.id,c,"email"),w("Check your email to verify your account!"),setTimeout(()=>{l("signin"),d(""),m(""),b("")},3e3))}else{let{data:t,error:r}=await o.O.auth.signInWithPassword({email:c,password:u});if(r)throw r;if(t.user){if(!t.user.email_confirmed_at)throw Error("Please verify your email before signing in. Check your inbox.");await C(t.user.id,c,"email"),e.push("/onboarding")}}}catch(e){x(e.message||"An error occurred")}finally{p(!1)}},P=async e=>{p(!0),x("");try{let t="https://ptasyynqqlvrbhqmtvhl.supabase.co";if(!t||t.includes("placeholder"))throw Error("Supabase is not configured. Please set NEXT_PUBLIC_SUPABASE_URL environment variable.");if(t.includes("supabase.com/dashboard")||t.includes("dashboard/project"))throw Error('Invalid Supabase URL! You\'re using the dashboard URL instead of the API URL. Go to Supabase → Settings → API and copy the "Project URL" (format: https://[project].supabase.co). Update NEXT_PUBLIC_SUPABASE_URL in Vercel and redeploy.');let{data:r,error:s}=await o.O.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(s)throw s}catch(e){x(e.message||"OAuth sign-in failed. Please check your environment variables are set correctly."),p(!1)}},C=async(e,t,r)=>{try{(await fetch("/api/auth/sync-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_user_id:e,email:t,provider:r})})).ok||console.error("Failed to sync user to database")}catch(e){console.error("Error syncing user:",e)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4 py-12",children:(0,s.jsx)("div",{className:"w-full max-w-md",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notion Data"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Alexa Skill Authentication"})]}),(0,s.jsxs)("div",{className:"flex mb-6 bg-gray-100 rounded-lg p-1",children:[(0,s.jsx)("button",{onClick:()=>{l("signin"),x(""),w("")},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("signin"===r?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Sign In"}),(0,s.jsx)("button",{onClick:()=>{l("signup"),x(""),w("")},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat("signup"===r?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Sign Up"})]}),f&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:f}),y&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:y}),(0,s.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>P("google"),disabled:g,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(i.ldW,{className:"text-red-500 text-xl"}),"Continue with Google"]}),(0,s.jsxs)("button",{onClick:()=>P("azure"),disabled:g,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(i.oV6,{className:"text-blue-500 text-xl"}),"Continue with Microsoft"]}),(0,s.jsxs)("button",{onClick:()=>P("apple"),disabled:g,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(i.oPZ,{className:"text-gray-900 text-xl"}),"Continue with Apple"]})]}),(0,s.jsxs)("div",{className:"relative mb-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,s.jsx)("input",{id:"email",type:"email",value:c,onChange:e=>d(e.target.value),required:!0,placeholder:"your@email.com",disabled:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",value:u,onChange:e=>m(e.target.value),required:!0,placeholder:"signup"===r?"Min. 8 chars, 1 uppercase, 1 number":"Enter your password",disabled:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),"signup"===r&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,s.jsx)("input",{id:"confirmPassword",type:"password",value:h,onChange:e=>b(e.target.value),required:!0,placeholder:"Confirm your password",disabled:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),"signin"===r&&(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("a",{href:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot Password?"})}),(0,s.jsx)("button",{type:"submit",disabled:g,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Processing...":"signup"===r?"Create Account":"Sign In"})]}),(0,s.jsx)("div",{className:"mt-6 text-center text-sm text-gray-600",children:"signin"===r?(0,s.jsxs)("p",{children:["Don't have an account?"," ",(0,s.jsx)("button",{onClick:()=>l("signup"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]}):(0,s.jsxs)("p",{children:["Already have an account?"," ",(0,s.jsx)("button",{onClick:()=>l("signin"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})})]})})})}function c(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"text-gray-600",children:"Loading..."})}),children:(0,s.jsx)(l,{})})}},9905:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var s=r(2616);r(2949);let a="https://ptasyynqqlvrbhqmtvhl.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YXN5eW5xcWx2cmJocW10dmhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NzYwODYsImV4cCI6MjA3OTQ1MjA4Nn0.di3Mk3cndlDzjWwUoXcB8DDslyJO-lbsIHtwRKaWCZI";if(!a||!n)throw console.error("❌ Missing Supabase configuration!"),console.error("Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your environment variables."),Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For local development, create a .env.local file. For production (Vercel), add them in your project settings.");if(a.includes("supabase.com/dashboard")||a.includes("dashboard/project")){let e="❌ Invalid Supabase URL format!\n  \nYour NEXT_PUBLIC_SUPABASE_URL is set to: ".concat(a,'\n\nThis looks like a dashboard URL. It should be the API URL instead.\n\nCorrect format: https://[project-ref].supabase.co\nExample: https://ptasyynqqlvrbhqmtvhl.supabase.co\n\nTo fix:\n1. Go to Supabase Dashboard → Settings → API\n2. Copy the "Project URL" (not the dashboard URL)\n3. Update NEXT_PUBLIC_SUPABASE_URL in Vercel\n4. Redeploy your application');throw console.error(e),alert("Configuration Error: Supabase URL is incorrect. Check console for details."),Error(e)}let o=(0,s.eI)(a,n)}},function(e){e.O(0,[997,479,115,364,744],function(){return e(e.s=4552)}),_N_E=e.O()}]);