(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{5169:function(e,t,r){Promise.resolve().then(r.bind(r,4598))},59:function(e,t,r){"use strict";r.d(t,{w_:function(){return l}});var s=r(8078),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(a),o=function(){return(o=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},i=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)0>t.indexOf(s[a])&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r};function l(e){return function(t){return s.createElement(c,o({attr:o({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return s.createElement(t.tag,o({key:r},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var r,a=e.attr,n=e.size,l=e.title,c=i(e,["attr","size","title"]),d=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,c,{className:r,style:o(o({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&s.createElement("title",null,l),e.children)};return void 0!==n?s.createElement(n.Consumer,null,function(e){return t(e)}):t(a)}},4598:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(7821),a=r(8078),n=r(8504),o=r(4542),i=r(9905),l=r(9844),c=r(5868),d=r(9471),u=r(9585);function h(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1),[b,x]=(0,a.useState)("");(0,a.useEffect)(()=>{p()},[]);let p=async()=>{let{data:{session:t}}=await i.O.auth.getSession();if(t){let t=new URLSearchParams(window.location.search).get("redirect");t?e.push(t):e.push("/dashboard")}},y=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),w=async r=>{r.preventDefault(),x(""),f(!0);try{if(!y(t))throw Error("Please enter a valid email address");let{data:r,error:s}=await i.O.auth.signInWithPassword({email:t,password:h});if(s)throw s;if(r.user){if(!r.user.email_confirmed_at)throw Error("Please verify your email before signing in. Check your inbox.");await j(r.user.id,t,"email");let s=new URLSearchParams(window.location.search).get("redirect");s?e.push(s):e.push("/dashboard")}}catch(e){x(e.message||"An error occurred")}finally{f(!1)}},v=async e=>{f(!0),x("");try{let{data:t,error:r}=await i.O.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(r)throw r}catch(e){x(e.message||"OAuth sign-in failed"),f(!1)}},j=async(e,t,r)=>{try{(await fetch("/api/auth/sync-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_user_id:e,email:t,provider:r})})).ok||console.error("Failed to sync user to database")}catch(e){console.error("Error syncing user:",e)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(l.h,{showAuth:!1}),(0,s.jsx)("div",{className:"flex items-center justify-center px-4 py-12",children:(0,s.jsxs)(u.Z,{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sign In"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Welcome back to Notion Data"})]}),b&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:b}),(0,s.jsx)(c.L,{onGoogleClick:()=>v("google"),onMicrosoftClick:()=>v("azure"),onAppleClick:()=>v("apple"),isLoading:g}),(0,s.jsxs)("div",{className:"relative my-6",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,s.jsx)("input",{id:"email",type:"email",value:t,onChange:e=>r(e.target.value),required:!0,placeholder:"your@email.com",disabled:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,s.jsx)("input",{id:"password",type:"password",value:h,onChange:e=>m(e.target.value),required:!0,placeholder:"Enter your password",disabled:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(o.default,{href:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot Password?"})}),(0,s.jsx)(d.z,{type:"submit",className:"w-full",isLoading:g,children:"Sign In"})]}),(0,s.jsx)("div",{className:"mt-6 text-center text-sm text-gray-600",children:(0,s.jsxs)("p",{children:["Don't have an account?"," ",(0,s.jsx)(o.default,{href:"/auth/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up"})]})})]})})]})}},9471:function(e,t,r){"use strict";r.d(t,{z:function(){return a}});var s=r(7821);function a(e){let{variant:t="primary",size:r="md",isLoading:a=!1,children:n,className:o="",disabled:i,...l}=e;return(0,s.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(o),disabled:i||a,...l,children:a?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):n})}r(8078)},9585:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7821);function a(e){let{children:t,className:r=""}=e;return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 ".concat(r),children:t})}r(8078)},9844:function(e,t,r){"use strict";r.d(t,{h:function(){return l}});var s=r(7821),a=r(8078),n=r(4542),o=r(8504),i=r(9905);function l(e){let{showAuth:t=!0}=e,r=(0,o.useRouter)(),[l,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&d()},[t]);let d=async()=>{let{data:{session:e}}=await i.O.auth.getSession();c(!!e)},u=async()=>{await i.O.auth.signOut(),r.push("/")};return(0,s.jsx)("header",{className:"border-b border-gray-200 bg-white",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsx)(n.default,{href:"/",className:"text-xl font-bold text-gray-900",children:"Notion Data"}),t&&l&&(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(n.default,{href:"/dashboard",className:"text-gray-600 hover:text-gray-900 font-medium",children:"Dashboard"}),(0,s.jsx)("button",{onClick:u,className:"text-gray-600 hover:text-gray-900 font-medium",children:"Logout"})]})]})})})}},5868:function(e,t,r){"use strict";r.d(t,{L:function(){return n}});var s=r(7821);r(8078);var a=r(8955);function n(e){let{onGoogleClick:t,onMicrosoftClick:r,onAppleClick:n,isLoading:o=!1}=e;return(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("button",{onClick:t,disabled:o,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(a.ldW,{className:"text-red-500 text-xl"}),"Continue with Google"]}),(0,s.jsxs)("button",{onClick:r,disabled:o,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(a.oV6,{className:"text-blue-500 text-xl"}),"Continue with Microsoft"]}),(0,s.jsxs)("button",{onClick:n,disabled:o,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(a.oPZ,{className:"text-gray-900 text-xl"}),"Continue with Apple"]})]})}},9905:function(e,t,r){"use strict";r.d(t,{O:function(){return o}});var s=r(2616);r(2949);let a="https://ptasyynqqlvrbhqmtvhl.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YXN5eW5xcWx2cmJocW10dmhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NzYwODYsImV4cCI6MjA3OTQ1MjA4Nn0.di3Mk3cndlDzjWwUoXcB8DDslyJO-lbsIHtwRKaWCZI";if(!a||!n)throw console.error("❌ Missing Supabase configuration!"),console.error("Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your environment variables."),Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For local development, create a .env.local file. For production (Vercel), add them in your project settings.");if(a.includes("supabase.com/dashboard")||a.includes("dashboard/project")){let e="❌ Invalid Supabase URL format!\n  \nYour NEXT_PUBLIC_SUPABASE_URL is set to: ".concat(a,'\n\nThis looks like a dashboard URL. It should be the API URL instead.\n\nCorrect format: https://[project-ref].supabase.co\nExample: https://ptasyynqqlvrbhqmtvhl.supabase.co\n\nTo fix:\n1. Go to Supabase Dashboard → Settings → API\n2. Copy the "Project URL" (not the dashboard URL)\n3. Update NEXT_PUBLIC_SUPABASE_URL in Vercel\n4. Redeploy your application');throw console.error(e),alert("Configuration Error: Supabase URL is incorrect. Check console for details."),Error(e)}let o=(0,s.createClient)(a,n)}},function(e){e.O(0,[997,479,542,115,364,744],function(){return e(e.s=5169)}),_N_E=e.O()}]);