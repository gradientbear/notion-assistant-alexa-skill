(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{5230:function(e,t,r){Promise.resolve().then(r.bind(r,3138))},59:function(e,t,r){"use strict";r.d(t,{w_:function(){return l}});var a=r(8078),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=a.createContext&&a.createContext(s),n=function(){return(n=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},i=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]]);return r};function l(e){return function(t){return a.createElement(c,n({attr:n({},e.attr)},t),function e(t){return t&&t.map(function(t,r){return a.createElement(t.tag,n({key:r},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var r,s=e.attr,o=e.size,l=e.title,c=i(e,["attr","size","title"]),d=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:r,style:n(n({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&a.createElement("title",null,l),e.children)};return void 0!==o?a.createElement(o.Consumer,null,function(e){return t(e)}):t(s)}},3138:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(7821),s=r(8078),o=r(8504),n=r(4542),i=r(9905),l=r(9844),c=r(5868),d=r(9471),u=r(9585);function h(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[f,p]=(0,s.useState)(!1),[x,y]=(0,s.useState)(""),[w,v]=(0,s.useState)("");(0,s.useEffect)(()=>{j()},[]);let j=async()=>{let{data:{session:t}}=await i.O.auth.getSession();if(t){let t=new URLSearchParams(window.location.search).get("redirect");t?e.push(t):e.push("/dashboard")}},N=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),C=e=>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(e),S=async r=>{r.preventDefault(),y(""),v(""),p(!0);try{if(!N(t))throw Error("Please enter a valid email address");if(!C(h))throw Error("Password must be at least 8 characters with uppercase, lowercase, and number");if(h!==g)throw Error("Passwords do not match");let{data:r,error:a}=await i.O.auth.signUp({email:t,password:h,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});if(a)throw a;r.user&&(await O(r.user.id,t,"email"),v("Check your email to verify your account!"),setTimeout(()=>{e.push("/auth/login")},3e3))}catch(e){y(e.message||"An error occurred")}finally{p(!1)}},E=async e=>{p(!0),y("");try{let{data:t,error:r}=await i.O.auth.signInWithOAuth({provider:e,options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(r)throw r}catch(e){y(e.message||"OAuth sign-in failed"),p(!1)}},O=async(e,t,r)=>{try{(await fetch("/api/auth/sync-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({auth_user_id:e,email:t,provider:r})})).ok||console.error("Failed to sync user to database")}catch(e){console.error("Error syncing user:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(l.h,{showAuth:!1}),(0,a.jsx)("div",{className:"flex items-center justify-center px-4 py-12",children:(0,a.jsxs)(u.Z,{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Get started with Notion Data"})]}),x&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:x}),w&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:w}),(0,a.jsx)(c.L,{onGoogleClick:()=>E("google"),onMicrosoftClick:()=>E("azure"),onAppleClick:()=>E("apple"),isLoading:f}),(0,a.jsxs)("div",{className:"relative my-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with email"})})]}),(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)("input",{id:"email",type:"email",value:t,onChange:e=>r(e.target.value),required:!0,placeholder:"your@email.com",disabled:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)("input",{id:"password",type:"password",value:h,onChange:e=>m(e.target.value),required:!0,placeholder:"Min. 8 chars, 1 uppercase, 1 number",disabled:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,a.jsx)("input",{id:"confirmPassword",type:"password",value:g,onChange:e=>b(e.target.value),required:!0,placeholder:"Confirm your password",disabled:f,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),(0,a.jsx)(d.z,{type:"submit",className:"w-full",isLoading:f,children:"Create Account"})]}),(0,a.jsx)("div",{className:"mt-6 text-center text-sm text-gray-600",children:(0,a.jsxs)("p",{children:["Already have an account?"," ",(0,a.jsx)(n.default,{href:"/auth/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign in"})]})})]})})]})}},9471:function(e,t,r){"use strict";r.d(t,{z:function(){return s}});var a=r(7821);function s(e){let{variant:t="primary",size:r="md",isLoading:s=!1,children:o,className:n="",disabled:i,...l}=e;return(0,a.jsx)("button",{className:"".concat("font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(n),disabled:i||s,...l,children:s?(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):o})}r(8078)},9585:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(7821);function s(e){let{children:t,className:r=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 ".concat(r),children:t})}r(8078)},9844:function(e,t,r){"use strict";r.d(t,{h:function(){return l}});var a=r(7821),s=r(8078),o=r(4542),n=r(8504),i=r(9905);function l(e){let{showAuth:t=!0}=e,r=(0,n.useRouter)(),[l,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&d()},[t]);let d=async()=>{let{data:{session:e}}=await i.O.auth.getSession();c(!!e)},u=async()=>{await i.O.auth.signOut(),r.push("/")};return(0,a.jsx)("header",{className:"border-b border-gray-200 bg-white",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)(o.default,{href:"/",className:"text-xl font-bold text-gray-900",children:"Notion Data"}),t&&l&&(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(o.default,{href:"/dashboard",className:"text-gray-600 hover:text-gray-900 font-medium",children:"Dashboard"}),(0,a.jsx)("button",{onClick:u,className:"text-gray-600 hover:text-gray-900 font-medium",children:"Logout"})]})]})})})}},5868:function(e,t,r){"use strict";r.d(t,{L:function(){return o}});var a=r(7821);r(8078);var s=r(8955);function o(e){let{onGoogleClick:t,onMicrosoftClick:r,onAppleClick:o,isLoading:n=!1}=e;return(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("button",{onClick:t,disabled:n,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(s.ldW,{className:"text-red-500 text-xl"}),"Continue with Google"]}),(0,a.jsxs)("button",{onClick:r,disabled:n,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(s.oV6,{className:"text-blue-500 text-xl"}),"Continue with Microsoft"]}),(0,a.jsxs)("button",{onClick:o,disabled:n,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white border-2 border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,a.jsx)(s.oPZ,{className:"text-gray-900 text-xl"}),"Continue with Apple"]})]})}},9905:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});var a=r(2616);r(2949);let s="https://ptasyynqqlvrbhqmtvhl.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YXN5eW5xcWx2cmJocW10dmhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NzYwODYsImV4cCI6MjA3OTQ1MjA4Nn0.di3Mk3cndlDzjWwUoXcB8DDslyJO-lbsIHtwRKaWCZI";if(!s||!o)throw console.error("❌ Missing Supabase configuration!"),console.error("Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in your environment variables."),Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For local development, create a .env.local file. For production (Vercel), add them in your project settings.");if(s.includes("supabase.com/dashboard")||s.includes("dashboard/project")){let e="❌ Invalid Supabase URL format!\n  \nYour NEXT_PUBLIC_SUPABASE_URL is set to: ".concat(s,'\n\nThis looks like a dashboard URL. It should be the API URL instead.\n\nCorrect format: https://[project-ref].supabase.co\nExample: https://ptasyynqqlvrbhqmtvhl.supabase.co\n\nTo fix:\n1. Go to Supabase Dashboard → Settings → API\n2. Copy the "Project URL" (not the dashboard URL)\n3. Update NEXT_PUBLIC_SUPABASE_URL in Vercel\n4. Redeploy your application');throw console.error(e),alert("Configuration Error: Supabase URL is incorrect. Check console for details."),Error(e)}let n=(0,a.createClient)(s,o)}},function(e){e.O(0,[997,479,542,115,364,744],function(){return e(e.s=5230)}),_N_E=e.O()}]);