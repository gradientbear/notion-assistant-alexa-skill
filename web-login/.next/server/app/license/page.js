(()=>{var e={};e.id=642,e.ids=[642],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},892:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(6130),s(1163),s(2874);var r=s(7105),a=s(5265),i=s(157),n=s.n(i),o=s(4665),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["license",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6130)),"E:\\Work\\alex\\notion-assistant-alexa-skill\\web-login\\app\\license\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1163)),"E:\\Work\\alex\\notion-assistant-alexa-skill\\web-login\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,2874,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\Work\\alex\\notion-assistant-alexa-skill\\web-login\\app\\license\\page.tsx"],u="/license/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/license/page",pathname:"/license",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},85:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,3817,23)),Promise.resolve().then(s.t.bind(s,9323,23)),Promise.resolve().then(s.t.bind(s,2204,23)),Promise.resolve().then(s.t.bind(s,820,23)),Promise.resolve().then(s.t.bind(s,5915,23)),Promise.resolve().then(s.t.bind(s,1611,23))},7046:()=>{},4824:(e,t,s)=>{Promise.resolve().then(s.bind(s,2952))},2952:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(9899),a=s(5507),i=s(6153),n=s(24);function o(){let e=(0,i.useRouter)(),[t,s]=(0,a.useState)(!0),[o,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[u,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[b,x]=(0,a.useState)(""),g=async t=>{t.preventDefault(),h(""),x(""),l(!0);try{if(!u.trim())throw Error("Please enter a license key");let t=await fetch("/api/validate-license",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({licenseKey:u.trim()})});if(!t.ok){let e=await t.json();throw Error(e.error||"Invalid license key")}if(!(await fetch("/api/users/update-license",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${(await n.O.auth.getSession()).data.session?.access_token}`},body:JSON.stringify({license_key:u.trim()})})).ok)throw Error("Failed to update license key");x("License key activated successfully!"),await fetch("/api/users/complete-onboarding",{method:"POST",headers:{Authorization:`Bearer ${(await n.O.auth.getSession()).data.session?.access_token}`}}),setTimeout(()=>{e.push("/dashboard")},2e3)}catch(e){h(e.message||"An error occurred")}finally{l(!1)}};return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:r.jsx("div",{className:"text-gray-600",children:"Loading..."})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Enter License Key"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Enter your license key to activate the Notion Data Alexa skill."}),m&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:m}),b&&r.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 text-green-700 rounded-lg text-sm",children:b}),(0,r.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"licenseKey",className:"block text-sm font-medium text-gray-700 mb-1",children:"License Key"}),r.jsx("input",{id:"licenseKey",type:"text",value:u,onChange:e=>p(e.target.value),required:!0,placeholder:"Enter your license key",disabled:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition disabled:bg-gray-100"})]}),r.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-indigo-700 transition disabled:opacity-50",children:o?"Activating...":"Activate License"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-500 text-center",children:"Don't have a license key? Contact support to get one."})]})})}},24:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var r=s(9283);let a="https://ptasyynqqlvrbhqmtvhl.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YXN5eW5xcWx2cmJocW10dmhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NzYwODYsImV4cCI6MjA3OTQ1MjA4Nn0.di3Mk3cndlDzjWwUoXcB8DDslyJO-lbsIHtwRKaWCZI";if(!a||!i)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For local development, create a .env.local file. For production (Vercel), add them in your project settings.");if(a.includes("supabase.com/dashboard")||a.includes("dashboard/project"))throw Error(`❌ Invalid Supabase URL format!
  
Your NEXT_PUBLIC_SUPABASE_URL is set to: ${a}

This looks like a dashboard URL. It should be the API URL instead.

Correct format: https://[project-ref].supabase.co
Example: https://ptasyynqqlvrbhqmtvhl.supabase.co

To fix:
1. Go to Supabase Dashboard → Settings → API
2. Copy the "Project URL" (not the dashboard URL)
3. Update NEXT_PUBLIC_SUPABASE_URL in Vercel
4. Redeploy your application`);let n=(0,r.eI)(a,i)},1163:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>a});var r=s(5023);s(642);let a={title:"Notion Data - Account Linking",description:"Link your Notion account to Alexa Skill"};function i({children:e}){return r.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:r.jsx("body",{suppressHydrationWarning:!0,children:e})})}},6130:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2772).createProxy)(String.raw`E:\Work\alex\notion-assistant-alexa-skill\web-login\app\license\page.tsx#default`)},642:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[942,371,405],()=>s(892));module.exports=r})();