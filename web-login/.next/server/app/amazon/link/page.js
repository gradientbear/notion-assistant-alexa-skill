(()=>{var e={};e.id=41,e.ids=[41],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2774:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),n(4860),n(1163),n(2874);var a=n(7105),o=n(5265),i=n(157),r=n.n(i),s=n(4665),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);n.d(t,l);let c=["",{children:["amazon",{children:["link",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,4860)),"E:\\Work\\alex\\notion-assistant-alexa-skill\\web-login\\app\\amazon\\link\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,1163)),"E:\\Work\\alex\\notion-assistant-alexa-skill\\web-login\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,2874,23)),"next/dist/client/components/not-found-error"]}],d=["E:\\Work\\alex\\notion-assistant-alexa-skill\\web-login\\app\\amazon\\link\\page.tsx"],u="/amazon/link/page",m={require:n,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/amazon/link/page",pathname:"/amazon/link",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},85:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,3817,23)),Promise.resolve().then(n.t.bind(n,9323,23)),Promise.resolve().then(n.t.bind(n,2204,23)),Promise.resolve().then(n.t.bind(n,820,23)),Promise.resolve().then(n.t.bind(n,5915,23)),Promise.resolve().then(n.t.bind(n,1611,23))},6941:(e,t,n)=>{Promise.resolve().then(n.bind(n,4967))},7046:()=>{},4967:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(9899),o=n(5507),i=n(6153),r=n(24);function s(){let e=(0,i.useRouter)();(0,i.useSearchParams)();let[t,n]=(0,o.useState)(!0),[s,l]=(0,o.useState)(!1),[c,d]=(0,o.useState)(null),[u,m]=(0,o.useState)(null),p=async t=>{l(!0);try{let n=t||u;if(!n){let t=prompt("Enter your Amazon Account ID (for testing) or leave empty to skip:");if(!t||""===t.trim()){l(!1);return}let n=await r.O.auth.getSession(),a=n.data.session?.access_token;if(!(await fetch("/api/users/link-amazon",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({amazon_account_id:t.trim()})})).ok)throw Error("Failed to link Amazon account");e.push("/onboarding");return}let a=await r.O.auth.getSession(),o=a.data.session?.access_token;if(!(await fetch("/api/users/link-amazon",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({amazon_account_id:n})})).ok)throw Error("Failed to link Amazon account");e.push("/onboarding")}catch(e){console.error("Error linking Amazon account:",e),alert("Failed to link Amazon account. Please try again."),l(!1)}};return t?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsx("div",{className:"text-gray-600",children:"Loading..."})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-xl p-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Link Amazon Account"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"To use the Alexa skill, you need to link your Amazon account. This allows the skill to identify you."}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"How to link:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-700 space-y-1",children:[a.jsx("li",{children:"Open the Alexa app on your phone"}),a.jsx("li",{children:'Search for "Voice Planner" skill'}),a.jsx("li",{children:'Click "Enable" or "Link Account"'}),a.jsx("li",{children:"You'll be redirected back here automatically"})]})]}),a.jsx("button",{onClick:()=>p(),disabled:s,className:"w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-indigo-700 transition disabled:opacity-50",children:s?"Linking...":"Link Amazon Account (Test Mode)"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-2 text-center",children:["For testing: Click the button above and enter your Amazon Account ID when prompted.",a.jsx("br",{}),"You can get this from the Alexa Developer Console Simulator."]}),a.jsx("button",{onClick:()=>e.push("/onboarding"),className:"w-full mt-3 py-2 text-gray-600 hover:text-gray-800 font-medium",children:"Skip for now"})]})})}function l(){return a.jsx(o.Suspense,{fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:a.jsx("div",{className:"text-gray-600",children:"Loading..."})}),children:a.jsx(s,{})})}},24:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var a=n(9283);let o="https://mwvurelnhrcbtpjtsiyb.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im13dnVyZWxuaHJjYnRwanRzaXliIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2MTE2NjYsImV4cCI6MjA4MDE4NzY2Nn0.4kMmjVKg9V0qUhQQMzxu9CdJuQ-zWpItaaqT3QzAEII";if(!o||!i)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY. For local development, create a .env.local file. For production (Vercel), add them in your project settings.");if(o.includes("supabase.com/dashboard")||o.includes("dashboard/project"))throw Error(`❌ Invalid Supabase URL format!
  
Your NEXT_PUBLIC_SUPABASE_URL is set to: ${o}

This looks like a dashboard URL. It should be the API URL instead.

Correct format: https://[project-ref].supabase.co
Example: https://ptasyynqqlvrbhqmtvhl.supabase.co

To fix:
1. Go to Supabase Dashboard → Settings → API
2. Copy the "Project URL" (not the dashboard URL)
3. Update NEXT_PUBLIC_SUPABASE_URL in Vercel
4. Redeploy your application`);let r=(0,a.createClient)(o,i)},4860:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});let a=(0,n(2772).createProxy)(String.raw`E:\Work\alex\notion-assistant-alexa-skill\web-login\app\amazon\link\page.tsx#default`)},1163:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i,metadata:()=>o});var a=n(5023);n(642);let o={title:"Voice Planner - Account Linking",description:"Link your Notion account to Alexa Skill"};function i({children:e}){return a.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:a.jsx("body",{suppressHydrationWarning:!0,children:e})})}},642:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),a=t.X(0,[942,371,405],()=>n(2774));module.exports=a})();