(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7367:function(e,s,t){Promise.resolve().then(t.bind(t,7340))},7340:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(7437),n=t(2265),c=t(2724),i=t(6777),l=t.n(i);let r="https://ptasyynqqlvrbhqmtvhl.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0YXN5eW5xcWx2cmJocW10dmhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NzYwODYsImV4cCI6MjA3OTQ1MjA4Nn0.di3Mk3cndlDzjWwUoXcB8DDslyJO-lbsIHtwRKaWCZI";r&&d||console.error("Missing Supabase environment variables");let o=r&&d?(0,c.eI)(r,d):null;function h(){let[e,s]=(0,n.useState)([]),[t,c]=(0,n.useState)([]),[i,r]=(0,n.useState)(!0),[d,h]=(0,n.useState)("licenses"),[_,u]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[j,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{o&&p()},[]);let p=async()=>{if(o){r(!0);try{let{data:e}=await o.from("licenses").select("*").order("created_at",{ascending:!1}),{data:t}=await o.from("users").select("*").order("created_at",{ascending:!1});s(e||[]),c(t||[])}catch(e){console.error("Error loading data:",e)}finally{r(!1)}}},N=async()=>{if(o&&_.trim())try{let{error:e}=await o.from("licenses").insert({license_key:_.trim(),status:"active",notes:x.trim()||null});if(e)throw e;u(""),m(""),g(!1),p()}catch(e){alert("Error: ".concat(e.message))}},v=async(e,s)=>{if(o)try{let{error:t}=await o.from("licenses").update({status:"active"===s?"inactive":"active"}).eq("license_key",e);if(t)throw t;p()}catch(e){alert("Error: ".concat(e.message))}},y=async e=>{if(o&&confirm("Are you sure you want to delete this license?"))try{let{error:s}=await o.from("licenses").delete().eq("license_key",e);if(s)throw s;p()}catch(e){alert("Error: ".concat(e.message))}};return o?(0,a.jsxs)("div",{className:l().container,children:[(0,a.jsxs)("div",{className:l().header,children:[(0,a.jsx)("h1",{children:"Voice Planner - Admin Panel"}),(0,a.jsx)("button",{onClick:p,className:l().refreshBtn,children:"Refresh"})]}),(0,a.jsxs)("div",{className:l().tabs,children:[(0,a.jsxs)("button",{className:"licenses"===d?l().activeTab:"",onClick:()=>h("licenses"),children:["Licenses (",e.length,")"]}),(0,a.jsxs)("button",{className:"users"===d?l().activeTab:"",onClick:()=>h("users"),children:["Users (",t.length,")"]})]}),"licenses"===d&&(0,a.jsxs)("div",{className:l().section,children:[(0,a.jsxs)("div",{className:l().sectionHeader,children:[(0,a.jsx)("h2",{children:"License Keys"}),(0,a.jsx)("button",{onClick:()=>g(!j),className:l().addBtn,children:j?"Cancel":"+ Add License"})]}),j&&(0,a.jsxs)("div",{className:l().form,children:[(0,a.jsx)("input",{type:"text",placeholder:"License Key",value:_,onChange:e=>u(e.target.value),className:l().input}),(0,a.jsx)("input",{type:"text",placeholder:"Notes (optional)",value:x,onChange:e=>m(e.target.value),className:l().input}),(0,a.jsx)("button",{onClick:N,className:l().submitBtn,children:"Add License"})]}),i?(0,a.jsx)("div",{className:l().loading,children:"Loading..."}):(0,a.jsxs)("div",{className:l().table,children:[(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"License Key"}),(0,a.jsx)("th",{children:"Status"}),(0,a.jsx)("th",{children:"Notes"}),(0,a.jsx)("th",{children:"Created"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:l().licenseKey,children:e.license_key}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"active"===e.status?l().statusActive:l().statusInactive,children:e.status})}),(0,a.jsx)("td",{children:e.notes||"-"}),(0,a.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsxs)("td",{children:[(0,a.jsx)("button",{onClick:()=>v(e.license_key,e.status),className:l().toggleBtn,children:"active"===e.status?"Deactivate":"Activate"}),(0,a.jsx)("button",{onClick:()=>y(e.license_key),className:l().deleteBtn,children:"Delete"})]})]},e.license_key))})]}),0===e.length&&(0,a.jsx)("div",{className:l().empty,children:"No licenses found"})]})]}),"users"===d&&(0,a.jsxs)("div",{className:l().section,children:[(0,a.jsx)("h2",{children:"Users"}),i?(0,a.jsx)("div",{className:l().loading,children:"Loading..."}):(0,a.jsxs)("div",{className:l().table,children:[(0,a.jsxs)("table",{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Email"}),(0,a.jsx)("th",{children:"License Key"}),(0,a.jsx)("th",{children:"Amazon Account ID"}),(0,a.jsx)("th",{children:"Notion Linked"}),(0,a.jsx)("th",{children:"Created"})]})}),(0,a.jsx)("tbody",{children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e.email}),(0,a.jsx)("td",{className:l().licenseKey,children:e.license_key}),(0,a.jsx)("td",{className:l().accountId,children:e.amazon_account_id}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:l().statusActive,children:e.notion_token?"Yes":"No"})}),(0,a.jsx)("td",{children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]}),0===t.length&&(0,a.jsx)("div",{className:l().empty,children:"No users found"})]})]})]}):(0,a.jsx)("div",{className:l().container,children:(0,a.jsx)("div",{className:l().error,children:"Missing Supabase configuration. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_SERVICE_KEY"})})}},6777:function(e){e.exports={container:"page_container__jZF7q",header:"page_header__oRW75",refreshBtn:"page_refreshBtn__latH8",tabs:"page_tabs__h2eeT",activeTab:"page_activeTab__imdC0",section:"page_section__zQZ2o",sectionHeader:"page_sectionHeader___raMx",addBtn:"page_addBtn__rdyJh",form:"page_form__NxPAx",input:"page_input__lx_gt",submitBtn:"page_submitBtn___TjlS",table:"page_table__qtljL",licenseKey:"page_licenseKey__MyJ_x",accountId:"page_accountId__xz40h",statusActive:"page_statusActive__8EFO6",statusInactive:"page_statusInactive__Ie_qb",toggleBtn:"page_toggleBtn__8Z8Kv",deleteBtn:"page_deleteBtn__1a7Bw",loading:"page_loading__4WMny",empty:"page_empty__btHOz",error:"page_error__JBrsB"}}},function(e){e.O(0,[250,724,971,117,744],function(){return e(e.s=7367)}),_N_E=e.O()}]);